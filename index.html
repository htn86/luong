<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>VNHR ‚Äî Payroll System (Professional)</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

  <style>
    :root { --primary: #0066cc; --primary-light: #e6f0ff; --danger: #ef4444; --success: #10b981; --text-main: #1f2937; --bg: #f3f4f6; --border: #e5e7eb; --muted:#6b7280; --warning-text:#d97706; --danger-text:#dc2626; }
    * { box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text-main); padding: 20px; font-size: 14px; margin: 0; }
    
    /* LAYOUT & CARDS */
    .app-container { display: grid; grid-template-columns: 1fr 450px; gap: 24px; max-width: 1280px; margin: 0 auto; align-items: start; }
    .card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid var(--border); box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
    
    /* TOOLBAR */
    .toolbar { max-width: 1280px; margin: 0 auto 20px; background: white; padding: 12px 20px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border); }
    .btn-secondary { background: white; border: 1px solid #ccc; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: 600; }
    .btn-excel { background: #16a34a; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: 600; }

    /* FORMS */
    fieldset { border: none; padding: 0; margin: 0; }
    legend { font-weight: 700; color: var(--primary); border-bottom: 2px solid var(--primary-light); padding-bottom: 10px; margin-bottom: 15px; width: 100%; display: block; }
    .form-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .form-grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 500; font-size: 13px; color: #555; }
    input, select { width: 100%; padding: 8px 12px; border: 1px solid #ccc; border-radius: 6px; font-size: 14px; }
    input:focus, select:focus { border-color: var(--primary); outline: none; }
    .required::after { content: '*'; color: red; margin-left: 4px; }

    /* Input-table styles (from original snippet) */
    .input-panel { }
    .input-table { width: 100%; border-collapse: collapse; }
    .input-table th { background: #f1f5f9; text-align: left; padding: 10px; border-bottom: 2px solid var(--border); color: #495057; position: sticky; top: 0; z-index: 10; }
    .input-table td { padding: 6px 10px; border-bottom: 1px solid var(--border); vertical-align: middle; }
    .col-label { width: 45%; font-weight: 500; color: #212529; }
    .col-note { width: 30%; color: #6c757d; font-style: italic; font-size: 0.9em; }
    .col-input { width: 25%; }

    .section-header { background-color: #f1f5f9; color: var(--primary); font-weight: 700; padding: 8px 10px; border-top: 2px solid #e2e8f0; }

    .input-control { width: 100%; padding: 5px 8px; border: 1px solid #ced4da; border-radius: 4px; font-family: inherit; text-align: right; }
    .input-control:focus { border-color: var(--primary); outline: none; background: #fff; }
    .input-control::placeholder { color: #adb5bd; }

    .input-group-date { display: flex; gap: 5px; }

    .btn-group { padding: 10px 15px; background: #fff; border-top: 1px solid var(--border); text-align: right; }

    /* RESULTS */
    .result-panel { position: sticky; top: 20px; }
    .employee-nav { background: #e0f2fe; padding: 10px; border-radius: 8px; margin-bottom: 15px; display: flex; gap: 10px; align-items: center; }
    .nav-btn { width: 30px; height: 30px; border-radius: 50%; border: 1px solid var(--primary); color: var(--primary); background: white; cursor: pointer; display: flex; justify-content: center; align-items: center; }
    
    .net-salary-card { background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; text-align: center; padding: 20px; border-radius: 12px 12px 0 0; }
    .net-salary-value { font-size: 2.2rem; font-weight: 800; margin: 8px 0; }
    .chips { display:flex; gap:8px; justify-content:center; margin-top:8px; flex-wrap:wrap; }
    .chip { background: rgba(255,255,255,0.15); color: white; padding:6px 10px; border-radius: 999px; font-size:0.85rem; display:inline-flex; gap:8px; align-items:center; }
    .chip .label { opacity:0.9; font-weight:600; }

    .result-body { background: white; border: 1px solid var(--border); border-top: none; padding: 20px; border-radius: 0 0 12px 12px; }
    .summary-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #eee; }
    .summary-row.total { font-weight: 700; color: var(--primary); border-bottom: 2px solid #eee; margin-bottom: 15px; padding-bottom: 15px; }
    .muted { color: var(--muted); font-size: 12px; }

    details { margin-top: 10px; background: white; border: 1px solid #eee; border-radius: 6px; }
    summary { padding: 10px; background: #f9fafb; cursor: pointer; font-weight: 600; }
    .table-wrapper { overflow-x: auto; padding: 0; }
    .detail-table { width: 100%; border-collapse: collapse; font-size: 13px; }
    .detail-table th, .detail-table td { border: 1px solid #e5e7eb; padding: 8px; }
    .detail-table th { background: #f8fafc; text-align: left; }
    .text-right { text-align: right; } .text-center { text-align: center; }

    .help { font-size: 12px; color: var(--muted); margin-top:6px; }

    @media (max-width: 900px) { .app-container { grid-template-columns: 1fr; } .form-grid-2 { grid-template-columns: 1fr; } .form-grid-3 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="toolbar">
    <div>
      <button id="downloadTemplateBtn" class="btn-excel">T·∫£i Template Excel</button>
      <input type="file" id="fileInput" accept=".xlsx" style="display:none;" />
      <button class="btn-secondary" onclick="document.getElementById('fileInput').click()">Nh·∫≠p Excel</button>
    </div>
    <div>
      <button id="exportResultBtn" class="btn-excel">Xu·∫•t K·∫øt Qu·∫£</button>
      <button id="resetBtn" class="btn-secondary">Reset</button>
    </div>
  </div>

  <div class="app-container">
    <!-- LEFT: replaced input panel (user provided snippet inserted here) -->
    <div class="input-panel">
    
    <div class="card">
      <div class="card-header">A. TH√îNG TIN NH√ÇN VI√äN & HƒêLƒê</div>
      <div class="card-body">
        <table class="input-table">
          <thead>
            <tr>
              <th>N·ªôi dung</th>
              <th>Nh·∫≠p li·ªáu</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="col-label">M√£ NV & H·ªç t√™n</td>
              <td class="col-input">
                <div style="display:grid; grid-template-columns: 1fr 2fr; gap:5px;">
                    <input type="text" id="empCode" class="input-control" placeholder="M√£" style="text-align:left">
                    <input type="text" id="empName" class="input-control" placeholder="H·ªç t√™n" style="text-align:left">
                </div>
              </td>
            </tr>
            <tr>
              <td class="col-label">Lo·∫°i h·ª£p ƒë·ªìng</td>
              <td class="col-input">
                <select id="contractType" class="input-control" style="text-align:left">
                  <option value="official">Ch√≠nh th·ª©c</option>
                  <option value="probation">Th·ª≠ vi·ªác</option>
                </select>
              </td>
            </tr>
            <tr style="background:#fffbeb;">
              <td class="col-label">üìÖ K·ª≥ l∆∞∆°ng</td>
              <td class="col-input">
                <div class="input-group-date">
                   <input type="number" id="periodMonth" class="input-control" placeholder="MM" value="12">
                   <input type="number" id="periodYear" class="input-control" placeholder="YYYY" value="2025">
                </div>
              </td>
            </tr>
            <tr style="background:#fffbeb;">
              <td class="col-label">üìÖ Ng√†y chi tr·∫£ l∆∞∆°ng</td>
              <td class="col-input">
                <div class="input-group-date">
                   <input type="number" id="payDay" class="input-control" placeholder="DD" value="15">
                   <input type="number" id="payMonth" class="input-control" placeholder="MM" value="02">
                   <input type="number" id="payYear" class="input-control" placeholder="YYYY" value="2026">
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card">
      <div class="card-header">B. M·ª®C L∆Ø∆†NG C∆† S·ªû</div>
      <div class="card-body">
        <table class="input-table">
          <tbody>
            <tr>
              <td class="col-label">L∆∞∆°ng c∆° b·∫£n</td>
              <td class="col-note">Ti·ªÅn l∆∞∆°ng c∆° s·ªü t√≠nh ti·ªÅn l∆∞∆°ng l√†m vi·ªác, l∆∞∆°ng ng√†y ngh·ªâ ph√©p, l·ªÖ/t·∫øt</td>
              <td class="col-input"><input type="number" id="salaryForNormalHours" class="input-control" value="10000000"></td>
            </tr>
            <tr>
              <td class="col-label">M·ª©a ph·ª• c·∫•p c∆° b·∫£n</td>
              <td class="col-note">C√°c kho·∫£n ph·ª• c·∫•p c·ªë ƒë·ªãnh theo th·ªùi gian l√†m vi·ªác</td>
              <td class="col-input"><input type="number" id="allowanceSalary" class="input-control" value="2000000"></td>
            </tr>
            <tr>
              <td class="col-label">L∆∞∆°ng t√≠nh ti·ªÅn tƒÉng ca</td>
              <td class="col-note">M·ª©c l∆∞∆°ng t√≠nh ti·ªÅn l√†m th√™m gi·ªù (b·∫±ng l∆∞∆°ng c∆° b·∫£n)</td>
              <td class="col-input"><input type="number" id="salOTForNormalHours" class="input-control" value="10000000"></td>
            </tr>
            <tr>
              <td class="col-label">ƒê·ªß ƒëi·ªÅu ki·ªán h∆∞·ªüng Chuy√™n c·∫ßn</td>
              <td class="col-note">ƒêi l√†m ƒë·∫ßy ƒë·ªß (t√≠nh c·∫£ ngh·ªâ l·ªÖ/t·∫øt, ph√©p,...)</td>
              <td class="col-input">
                <select id="isPCCC" class="input-control" style="text-align:left">
                  <option value="1">C√≥</option>
                  <option value="0">Kh√¥ng</option>
                </select>
              </td>
            </tr>
            <tr>
              <td class="col-label">Ph·ª• c·∫•p Chuy√™n c·∫ßn</td>
              <td class="col-note">M·ª©c h∆∞·ªüng ph·ª• c·∫•p chuy√™n c·∫ßn</td>
              <td class="col-input"><input type="number" id="attendanceAllowanceBase" class="input-control" value="500000"></td>
            </tr>
                        </tbody>
        </table>
      </div>
    </div>


    <div class="card">
      <div class="card-header">C. CH·∫§M C√îNG CHI TI·∫æT</div>
      <div class="card-body">
        <table class="input-table">
          <thead>
            <tr>
              <th style="width:40%">Khung gi·ªù / Lo·∫°i c√¥ng</th>
              <th style="width:30%">Quy t·∫Øc & H·ªá s·ªë</th>
              <th style="width:30%">Gi·ªù th·ª±c t·∫ø</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="3" class="section-header">I. H√ÄNH CH√çNH/ CA NG√ÄY (T2-T7)</td></tr>
            <tr>
                <td>Gi·ªù l√†m vi·ªác (08:00-17:00)</td>
                <td class="col-note">S·ªë gi·ªù l√†m vi·ªác th·ªùi gian h√†nh ch√≠nh</td>
                <td class="col-input"><input type="number" id="h_norm_day" class="input-control" placeholder="208"></td>
            </tr>
            <tr>
                <td>Gi·ªù ngh·ªâ tr∆∞a (12:00-13:00)</td>
                <td class="col-note">S·ªë gi·ªù l√†m vi·ªác gi·ªù ngh·ªâ bu·ªïi tr∆∞a</td>
                <td class="col-input"><input type="number" id="h_norm_break" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>OT Chi·ªÅu (17:00-20:00)</td>
                <td class="col-note"><b style="color:var(--warning-text)">150%</b> S·ªë gi·ªù tƒÉng ca h√†nh ch√≠nh/ ca ng√†y</td>
                <td class="col-input"><input type="number" id="h_norm_ot_150" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>OT T·ªëi (20:00-22:00)</td>
                <td class="col-note"><b style="color:var(--warning-text)">210%</b> S·ªë gi·ªù tƒÉng ca ban ƒë√™m h√†nh ch√≠nh/ ca ng√†y</td>
                <td class="col-input"><input type="number" id="h_norm_ot_210" class="input-control" placeholder="0"></td>
            </tr>

            <tr><td colspan="3" class="section-header">II. CA ƒê√äM (NIGHT SHIFT)</td></tr>
            <tr>
                <td>L√†m ƒë√™m (20:00-22:00)</td>
                <td class="col-note">100% (NIGHT_100)</td>
                <td class="col-input"><input type="number" id="h_night_100" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>ƒê√™m khuya (22:00-24:00 & 01-05)</td>
                <td class="col-note">130% (NIGHT_130)</td>
                <td class="col-input"><input type="number" id="h_night_130" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>Ngh·ªâ gi·ªØa ca ƒë√™m (00:00-01:00)</td>
                <td class="col-note">130% (BREAK_130)</td>
                <td class="col-input"><input type="number" id="h_night_break" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>OT R·∫°ng s√°ng (05:00-06:00)</td>
                <td class="col-note"><b style="color:var(--warning-text)">200%</b> (OT_200)</td>
                <td class="col-input"><input type="number" id="h_night_ot_200" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>OT S√°ng (06:00-08:00)</td>
                <td class="col-note"><b style="color:var(--warning-text)">150%</b> (OT_150)</td>
                <td class="col-input"><input type="number" id="h_night_ot_150" class="input-control" placeholder="0"></td>
            </tr>

            <tr><td colspan="3" class="section-header">III. CH·ª¶ NH·∫¨T (SUNDAY)</td></tr>
            <tr>
                <td>L√†m ng√†y & Ngh·ªâ tr∆∞a & OT Chi·ªÅu</td>
                <td class="col-note"><b style="color:var(--danger-text)">200%</b> (SUNDAY_DAY_*)</td>
                <td class="col-input"><input type="number" id="h_sun_day" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>L√†m ƒë√™m & Ngh·ªâ ƒë√™m (22:00-05:00)</td>
                <td class="col-note"><b style="color:var(--danger-text)">270%</b> (SUNDAY_NIGHT_270)</td>
                <td class="col-input"><input type="number" id="h_sun_night_270" class="input-control" placeholder="0"></td>
            </tr>
             <tr>
                <td>L√†m t·ªëi (20:00-22:00)</td>
                <td class="col-note"><b style="color:var(--danger-text)">200%</b> (SUNDAY_NIGHT_200)</td>
                <td class="col-input"><input type="number" id="h_sun_night_200" class="input-control" placeholder="0"></td>
            </tr>

            <tr><td colspan="3" class="section-header">IV. NG√ÄY L·ªÑ / T·∫æT (HOLIDAY)</td></tr>
            <tr>
                <td>L√†m ng√†y & OT Ng√†y</td>
                <td class="col-note"><b style="color:var(--danger-text)">300%</b> (HOLIDAY_DAY_*)</td>
                <td class="col-input"><input type="number" id="h_hol_day" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>L√†m ƒë√™m & Ngh·ªâ ƒë√™m</td>
                <td class="col-note"><b style="color:#b91c1c">390%</b> (HOLIDAY_NIGHT_390)</td>
                <td class="col-input"><input type="number" id="h_hol_night" class="input-control" placeholder="0"></td>
            </tr>
            <tr>
                <td>OT S√°ng L·ªÖ (06:00-08:00)</td>
                <td class="col-note"><b style="color:var(--danger-text)">300%</b> (HOLIDAY_NIGHT_OT)</td>
                <td class="col-input"><input type="number" id="h_hol_ot_300" class="input-control" placeholder="0"></td>
            </tr>

            <tr><td colspan="3" class="section-header">V. TH·ªúI GIAN NGH·ªà</td></tr>
            <tr>
                <td>Ngh·ªâ ph√©p / L·ªÖ h∆∞·ªüng l∆∞∆°ng</td>
                <td class="col-note">100% L∆∞∆°ng</td>
                <td class="col-input"><input type="number" id="paidLeaveDays" class="input-control" placeholder="Ng√†y"></td>
            </tr>
            <tr>
                <td>Ngh·ªâ ch·ªù vi·ªác</td>
                <td class="col-note">70% L∆∞∆°ng</td>
                <td class="col-input"><input type="number" id="companyLeaveDays" class="input-control" placeholder="Ng√†y"></td>
            </tr>

          </tbody>
        </table>
      </div>
    </div>

        <!-- NEW: D. TH√îNG TIN T√çNH B·∫¢O HI·ªÇM -->
    <div class="card">
      <div class="card-header">D. TH√îNG TIN B·∫¢O HI·ªÇM</div>
      <div class="card-body">
        <table class="input-table">
          <tbody>
            <tr>
              <td class="col-label">T√¨nh tr·∫°ng tham gia b·∫£o hi·ªÉm</td>
              <td class="col-note">X√°c ƒë·ªãnh t√≠nh b·∫£o hi·ªÉm</td>
              <td class="col-input">
                <select id="isBHXH" class="input-control" style="text-align:left">
                  <option value="1">C√≥</option>
                  <option value="0">Kh√¥ng</option>
                </select>
              </td>
            </tr>
            <tr>
              <td class="col-label">T√¨nh tr·∫°ng tham gia b·∫£o hi·ªÉm th·∫•t nghi·ªáp</td>
              <td class="col-note">X√°c ƒë·ªãnh t√¨nh tr·∫°ng c√≥ tham gia b·∫£o hi·ªÉm th·∫•t nghi·ªáp</td>
              <td class="col-input">
                <select id="isBHTN" class="input-control" style="text-align:left">
                  <option value="1">C√≥</option>
                  <option value="0">Kh√¥ng</option>
                </select>
              </td>
            </tr>
            <tr>
              <td class="col-label">L∆∞∆°ng ƒë√≥ng BHXH</td>
              <td class="col-note">M·∫∑c ƒë·ªãnh b·∫±ng LCB</td>
              <td class="col-input"><input type="number" id="socialSalary" class="input-control" value="10000000"></td>
            </tr>
            <tr>
              <td class="col-label">ƒê·ªëi t∆∞·ª£ng ch·ªãu chi ph√≠ b·∫£o hi·ªÉm 10.5%</td>
              <td class="col-note">L·ª±a ch·ªçn ƒë·ªëi t∆∞·ª£ng n·ªôp BHXH ph·∫ßn 10,5%</td>
              <td class="col-input">
                <select id="insurancePayer" class="input-control" style="text-align:left">
                  <option value="NLD">NLƒê</option>
                  <option value="DN">DN</option>              
                </select>
              </td>
            </tr>
            </tbody>
        </table>
      </div>
    </div>
    <!-- END NEW D -->

        <!-- NEW: E. TH√îNG TIN T√çNH THU·∫æ TNCN (ch·ªâ b·ªï sung ph·∫ßn nh·∫≠p li·ªáu) -->
    <div class="card">
      <div class="card-header">E. TH√îNG TIN T√çNH THU·∫æ TNCN</div>
      <div class="card-body">
        <table class="input-table">
          <tbody>
            <tr>
              <td class="col-label">T√¨nh tr·∫°ng c∆∞ tr√∫</td>
              <td class="col-note">X√°c ƒë·ªãnh ph∆∞∆°ng ph√°p t√≠nh thu·∫ø</td>
              <td class="col-input">
                <select id="isResident" class="input-control" style="text-align:left">
                  <option value="1">C∆∞ tr√∫</option>
                  <option value="0">Kh√¥ng c∆∞ tr√∫</option>
                </select>
                <div style="font-size:0.9em; color:#6c757d; margin-top:4px;">Ghi ch√∫: Ng∆∞·ªùi c∆∞ tr√∫ = c√≥ m·∫∑t t·∫°i VN ‚â•183 ng√†y trong 12 th√°ng ho·∫∑c c√≥ n∆°i ·ªü th∆∞·ªùng xuy√™n.</div>
              </td>
            </tr>
            </tr>
             <tr>
              <td class="col-label">Ng∆∞·ªùi ph·ª• thu·ªôc</td>
              <td class="col-note">S·ªë ng∆∞·ªùi ph·ª• thu·ªôc t√≠nh Gi·∫£m tr·ª´ gia c·∫£nh</td>
              <td class="col-input"><input type="number" id="numDependents" class="input-control" value="0"></td>
            </tr>
            <tr>
              <td class="col-label">Ph∆∞∆°ng ph√°p t√≠nh thu·∫ø</td>
              <td class="col-note">L·ª±a ch·ªçn ph∆∞∆°ng ph√°p √°p d·ª•ng</td>
              <td class="col-input">
                <select id="taxMode" class="input-control" style="text-align:left">
                  <option value="progressive">L≈©y ti·∫øn to√†n ph·∫ßn</option>
                  <option value="flat_10">To√†n ph·∫ßn 10%</option>
                  <option value="flat_20">To√†n ph·∫ßn 20% </option>
                </select>
              </td>
            </tr>
            <tr>
              <td class="col-label">Thu nh·∫≠p ch·ªãu thu·∫ø kh√°c (k·ª≥ n√†y)</td>
              <td class="col-note">Thu nh·∫≠p kh√°c (ti·ªÅn th∆∞·ªüng, b√π l∆∞∆°ng) ph√°t sinh trong k·ª≥, t√≠nh v√†o thu nh·∫≠p ch·ªãu thu·∫ø</td>
              <td class="col-input"><input type="number" id="otherTaxableIncomeInPeriod" class="input-control" value="0"></td>
            </tr>
            <tr>
              <td class="col-label">Thu nh·∫≠p mi·ªÖn/kh√¥ng ch·ªãu thu·∫ø (nh·∫≠n trong k·ª≥ chi tr·∫£ l∆∞∆°ng)</td>
              <td class="col-note">V√≠ d·ª•: ti·ªÅn ƒÉn tr∆∞a mi·ªÖn thu·∫ø, tr·ª£ c·∫•p ƒëi·ªán tho·∫°i,...</td>
              <td class="col-input"><input type="number" id="taxFreeIncome" class="input-control" value="0"></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- END NEW E -->
  </div>

    <!-- RIGHT: result panel (kept as in improved UI) -->
    <div class="result-panel">
      <div class="employee-nav">
          <button class="nav-btn" id="prevEmpBtn">‚ùÆ</button>
          <select id="empSelect" style="flex:1; border:1px solid #bae6fd;" aria-label="Ch·ªçn nh√¢n vi√™n"></select>
          <button class="nav-btn" id="nextEmpBtn">‚ùØ</button>
      </div>

      <div class="net-salary-card">
        <div id="displayEmpName" style="margin-top:6px; font-weight:600;">--</div>  
        <div id="displaySalaryPeriod" style="background:rgba(255,255,255,0.15); display:inline-block; padding:6px 10px; border-radius:10px; font-size:12px;">--/--</div>
        <div style="text-transform:uppercase; font-size:0.85rem; opacity:0.9;">L∆∞∆°ng Th·ª±c Lƒ©nh (Net)</div>
          <div class="net-salary-value" id="netSalary">0 VND</div>
      </div>   
    

      <div class="result-body">
          <div class="summary-row"><span style="color:#666;">T·ªïng l∆∞∆°ng</span><span style="font-weight:600;" id="totalIncome">0</span></div>
          <div class="summary-row"><span style="color:#666;">Ti·ªÅn l∆∞∆°ng (c∆° b·∫£n, tƒÉng ca, l·ªÖ/t·∫øt, ph√©p ...)</span><span style="font-weight:600;" id="summaryTotalSalary">0</span></div>
          <div class="summary-row"><span style="color:#666;">Ti·ªÅn ph·ª• c·∫•p</span><span style="font-weight:600;" id="totalAllowance">0</span></div>
          <div class="summary-row" style="color:var(--danger);"><span style="color:#666;">B·∫£o hi·ªÉm (NV)</span><span style="font-weight:600;" id="insuranceDeduction">0</span></div>
          <div class="summary-row" style="color:var(--danger);"><span style="color:#666;">Thu·∫ø TNCN</span><span style="font-weight:600;" id="personalIncomeTax">0</span></div>
          
          <div style="margin-top:15px;">
              <details><summary>Chi ti·∫øt L∆∞∆°ng</summary><div id="salaryDetail" class="table-wrapper"></div></details>
              <details><summary>Chi ti·∫øt Ph·ª• c·∫•p</summary><div id="allowanceBonusDetail" class="table-wrapper"></div></details>
              <details><summary>Chi ti·∫øt B·∫£o hi·ªÉm</summary><div id="InsuranceDetail" class="table-wrapper"></div></details>
              <details><summary>Chi ti·∫øt Thu·∫ø TNCN</summary><div id="taxDetail" class="table-wrapper"></div></details>
          </div>
      </div>
    </div>
  </div>
  
  <script type="module" src="src/main.js"></script>
  <script>
    const mirrorChips = () => {
      const gross = document.getElementById('summaryTotalSalary')?.textContent || '0';
      const ins = document.getElementById('insuranceDeduction')?.textContent || '0';
      const tax = document.getElementById('personalIncomeTax')?.textContent || '0';
      if (document.getElementById('chipGross')) document.getElementById('chipGross').textContent = gross;
      if (document.getElementById('chipInsurance')) document.getElementById('chipInsurance').textContent = ins;
      if (document.getElementById('chipTax')) document.getElementById('chipTax').textContent = tax;
    };

    document.addEventListener('DOMContentLoaded', () => {
      const targets = ['summaryTotalSalary','insuranceDeduction','personalIncomeTax'];
      targets.forEach(id => {
        const node = document.getElementById(id);
        if (!node) return;
        const mo = new MutationObserver(mirrorChips);
        mo.observe(node, { childList: true, characterData: true, subtree: true });
      });
      setTimeout(mirrorChips, 300);
    });
  </script>
</body>
</html>